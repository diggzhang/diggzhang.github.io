---
layout:     post
title:      "重构 - 内联函数"
subtitle:   ""
date:       2019-08-24
author:     "diggzhang"
tags:
    - 重构
---

最近完成一个关于元数据管理的项目，负责后端数据流的调度和充足。由于项目本身性质，所以牵扯到了多个不同领域的项目，有不同的数据源，客观逻辑上就要求我去将不同的东西重新组合然后塞到某个地方。反应到代码中，就导致产生了各种函数互相耦合关联，虽然我尽量让每个函数精简，可是当一块一块基本拼接后，还是引发了代码混乱的问题。函数调用链太深了，当一处出了问题，需要一个一个函数的去巡查。

函数弄得简短是为了清晰易读，这点没有错。但是当搭建到一起时候感觉到有点混乱，那就很有重构必要了。

《重构》中给出的做法是：

- 检查函数，确定不具备多态性
- 找出函数所有调用点
- 将函数的所有调用点，替换为调用本体
- 每次替换后，执行测试
- 删除函数的定义

值得参考的是，其实重点不是将一块一块的小函数做成内联函数，而是重构过程中的小步前进。